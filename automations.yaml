- id: '1529366648322'
  alias: Open Chicken Door At Morning
  description: Open at Dawn
  trigger:
  - platform: time
    at: 08:00:00
  condition: []
  action:
  - entity_id: cover.chicken_coop_door
    service: cover.open_cover
  mode: single
- id: '1541895123592'
  alias: 'Notify: if CCTV Goes Offline'
  description: Notify if CCTV goes off for more than a specific length of time, originally
    used ping detector binary sensors, but in 2022 migrated over to the camera availability,
    provided by the axis camera component. 2022, moved back to Ping detects binary
    sensors so that I can use the sensors for other things.
  trigger:
  - entity_id: binary_sensor.front_door_cctv_online
    for: 00:10:00
    from: 'on'
    platform: state
    to: 'off'
  - entity_id: binary_sensor.bunny_cctv_online
    for: 00:10:00
    from: 'on'
    platform: state
    to: 'off'
  - entity_id: binary_sensor.drive_cctv_online
    for: 00:10:00
    from: 'on'
    platform: state
    to: 'off'
  - entity_id: binary_sensor.garden_cctv_online
    for: 00:10:00
    from: 'on'
    platform: state
    to: 'off'
  - entity_id: binary_sensor.garage_cctv_online
    for: 00:10:00
    from: 'on'
    platform: state
    to: 'off'
  - entity_id: binary_sensor.garage_2_cctv_online
    for: 00:10:00
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      title: CCTV Offline
      message: '{{trigger.entity_id}} offline'
    service: notify.google_cloud_notify
- id: '1558317969078'
  alias: CCTV Reboot Each Day
  trigger:
  - at: 06:45
    platform: time
  condition: []
  action:
  - service: rest_command.cctv_front_door_restart
    data: {}
    enabled: false
  - service: rest_command.cctv_drive_restart
    data: {}
    enabled: false
  - service: rest_command.cctv_garage_restart
    data: {}
    enabled: false
  - service: rest_command.cctv_garden_restart
    data: {}
    enabled: false
  - service: rest_command.cctv_garage2_restart
    data: {}
    enabled: false
  - device_id: 853ca02c816df4ce4860c07060837a6a
    domain: button
    entity_id: button.front_door_11_onvif_reboot
    type: press
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - device_id: 99689212065c11ebbd2ecbef1587dfe1
    domain: button
    entity_id: button.drive_high_16_reboot
    type: press
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - device_id: ed137229065c11eb8030a1dacd09fb94
    domain: button
    entity_id: button.garage_13_onvif_reboot
    type: press
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - device_id: 2318258f467e52e3ff856d5e31540329
    domain: button
    entity_id: button.garden_18_onvif_reboot
    type: press
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - device_id: 9f2814a5af139ead2a88c4a477dda6c4
    domain: button
    entity_id: button.drive_long_12_reboot
    type: press
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - device_id: 345bf174d40b5581b82ff49809885adf
    domain: button
    entity_id: button.chickens_15_onvif_reboot
    type: press
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  - device_id: 83dd8340e23fb86fef21b09a22a57929
    domain: button
    entity_id: button.drive_higher_21_onvif_reboot
    type: press
- id: '1564192629041'
  alias: 'Irrigation: Pot Irrigation Script Off to Valve Off'
  description: 'If script is turned off manually, then close valve, else it will stay
    open. '
  trigger:
  - entity_id: script.front_garden_pot_irrigation_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.front_garden_pot_irrigation_valve
    service: switch.turn_off
- id: '1564192623451'
  alias: 'Irrigation: Irrigate Front Garden Pots at Sunrise'
  trigger:
  - platform: template
    value_template: '{{states(''sensor.time'') == states(''sensor.front_garden_pot_irrigation_next_run'')[19:24]}}'
  condition:
  - condition: and
    conditions:
    - condition: template
      value_template: '{{states(''sensor.front_garden_pot_irrigation_next_run'')[5:15]
        == now().date().strftime(''%d-%m-%Y'')}}'
    - condition: state
      entity_id: sensor.front_garden_pots_irrigation_interlock
      state: Uninhibited
  action:
  - entity_id: script.front_garden_pot_irrigation_timer
    service: script.front_garden_pot_irrigation_timer
- id: '1564192123451'
  alias: 'Irrigation: Irrigate Back Garden at Sunrise'
  description: With editable offset
  trigger:
  - platform: template
    value_template: '{{states(''sensor.time'') == states(''sensor.back_garden_irrigation_next_run'')[19:24]}}'
  condition:
  - condition: and
    conditions:
    - condition: template
      value_template: '{{states(''sensor.back_garden_irrigation_next_run'')[5:15]
        == now().date().strftime(''%d-%m-%Y'')}}'
    - condition: state
      entity_id: sensor.back_garden_irrigation_interlock
      state: Uninhibited
  action:
  - entity_id: script.back_garden_irrigation_timer
    service: script.back_garden_irrigation_timer
- id: '1564192123123'
  alias: 'Irrigation: Irrigate Back Garden Lawn at Sunrise'
  trigger:
  - platform: template
    value_template: '{{states(''sensor.time'') == states(''sensor.back_garden_lawn_irrigation_next_run'')[19:24]}}'
  condition:
  - condition: and
    conditions:
    - condition: template
      value_template: '{{states(''sensor.back_garden_lawn_irrigation_next_run'')[5:15]
        == now().date().strftime(''%d-%m-%Y'')}}'
    - condition: state
      entity_id: sensor.back_garden_lawn_irrigation_interlock
      state: Uninhibited
  action:
  - delay:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - entity_id: script.back_garden_lawn_irrigation_timer
    service: script.back_garden_lawn_irrigation_timer
- id: '1564192623452'
  alias: 'Irrigation: Irrigate Front Lawn at Sunrise'
  trigger:
  - platform: template
    value_template: '{{states(''sensor.time'') == states(''sensor.front_garden_lawn_irrigation_next_run'')[19:24]}}'
  condition:
  - condition: and
    conditions:
    - condition: template
      value_template: '{{states(''sensor.front_garden_lawn_irrigation_next_run'')[5:15]
        == now().date().strftime(''%d-%m-%Y'')}}'
    - condition: state
      entity_id: sensor.front_garden_lawn_irrigation_interlock
      state: Uninhibited
  action:
  - entity_id: script.front_garden_lawn_irrigation_timer
    service: script.front_garden_lawn_irrigation_timer
- id: '1564234217905'
  alias: 'Irrigation: Lawn Irrigation Script Off to Valve Off'
  description: 'If script is turned off manually, then close valve, else it will stay
    open. '
  trigger:
  - entity_id: script.front_garden_lawn_irrigation_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.front_garden_lawn_irrigation_valve
    service: switch.turn_off
- id: '1512334217905'
  alias: 'Irrigation: Garden Irrigation Script Off to Valve Off'
  description: 'If script is turned off manually, then close valve, else it will stay
    open. '
  trigger:
  - entity_id: script.back_garden_irrigation_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.back_garden_irrigation_valve
    service: switch.turn_off
- id: '1512331237905'
  alias: 'Irrigation: Garden Lawn Irrigation Script Off to Valve Off'
  description: 'If script is turned off manually, then close valve, else it will stay
    open. '
  trigger:
  - entity_id: script.back_garden_lawn_irrigation_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - entity_id: switch.back_garden_lawn_1_irrigation_valve
    service: switch.turn_off
  - entity_id: switch.back_garden_lawn_2_irrigation_valve
    service: switch.turn_off
- id: '1564245956941'
  alias: Kitchen Fan Script Off to Switch Off
  description: Not sure why I wrote this?
  trigger:
  - entity_id: script.kitchen_extractor_timer
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      entity_id: switch.kitchen_extractor_fan
    service: switch.turn_off
  mode: single
- id: '1572464632861'
  alias: Smoke Machine Automation - Smoke
  description: 'Don''t need to turn on and off, as RF Link signal_repetitions: xx
    is used to set on the "on" time. Makes use of twrecked/hass-momentary Momentary
    Switch Component for Home Assistant'
  trigger:
  - event_data: {}
    event_type: smoke_machine_automation
    platform: event
    enabled: false
  - type: motion
    platform: device
    device_id: 853ca02c816df4ce4860c07060837a6a
    entity_id: binary_sensor.front_door_11_vmd4_camera1profile2
    domain: binary_sensor
    enabled: false
  - type: motion
    platform: device
    device_id: 83dd8340e23fb86fef21b09a22a57929
    entity_id: binary_sensor.drive_higher_21_vmd4_camera1profile2
    domain: binary_sensor
    enabled: false
  - platform: state
    entity_id:
    - switch.smoke_machine
    to: 'off'
  condition: []
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.smoke_machine
    enabled: false
  - delay:
      hours: 0
      minutes: 0
      seconds: 5
      milliseconds: 0
    enabled: false
  - service: switch.turn_off
    data: {}
    target:
      entity_id: switch.smoke_machine
    enabled: false
  - event: smoke_machine_automation
    event_data: {}
    enabled: false
  - service: switch.toggle
    data: {}
    target:
      entity_id: switch.smoke_machine
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.smoke_machine
    enabled: false
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
    enabled: true
- id: '1576599112935'
  alias: Welcome home Richard
  description: 'Note: These actions can only be edited with YAML'
  trigger:
  - entity_id: person.richard
    for: 00:05:00
    from: not_home
    platform: state
    to: home
  condition: []
  action:
  - data_template:
      cache: false
      entity_id: media_player.ground_floor
      message: "Welcome home Richard. {% if is_state('person.lucy', 'home')  %} Lucy
        is also at home and needs cuddles! {%- else -%}\n    Lucy is away at {{state_attr('device_tracker.google_maps_114635444798949098363',
        'address')}}.\n {%- endif %}\n    Outside {{states('sensor.dark_sky_temperature')|
        round(0)}}C {{states('sensor.dark_sky_humidity')| round(0) }}% Inside {{states('sensor.entryway_thermostat_temperature')|
        round(0)}}C \n{{states('sensor.entryway_thermostat_humidity')| round(0)}}%
        {% if is_state('climate.entryway', 'heat') %} Heating on and set to {{state_attr('climate.entryway',
        'temperature')| round(0) }}°C\n{%- endif %}\n"
    service: tts.google_translate_say
- id: '1576601014597'
  alias: Plug-in Air Freshener - On-Off Automation
  description: 'Turn on in the morning when someone is home as long as it between
    certain times. Also turns back on after returning home. Turn off in the evening
    or when no one is home. Repeat as it sometimes does not work '
  trigger:
  - platform: time
    at: input_datetime.air_freshener_on_time
  - platform: time
    at: input_datetime.air_freshener_off_time
  - platform: homeassistant
    event: start
  - platform: zone
    entity_id: person.richard
    zone: zone.home
    event: leave
  - platform: zone
    entity_id: person.richard
    zone: zone.home
    event: enter
  - platform: zone
    entity_id: person.lucy
    zone: zone.home
    event: enter
  - platform: zone
    entity_id: person.lucy
    zone: zone.home
    event: leave
  condition: []
  action:
  - choose:
    - conditions:
      - condition: and
        conditions:
        - condition: time
          after: input_datetime.air_freshener_on_time
          before: input_datetime.air_freshener_off_time
        - condition: or
          conditions:
          - condition: zone
            entity_id: person.richard
            zone: zone.home
          - condition: zone
            entity_id: person.lucy
            zone: zone.home
      sequence:
      - service: switch.turn_on
        target:
          entity_id:
          - switch.plug_in_air_freshener_1
          - switch.plug_in_air_freshener_2
    default:
    - service: switch.turn_off
      target:
        entity_id:
        - switch.plug_in_air_freshener_1
        - switch.plug_in_air_freshener_2
  mode: restart
- id: '1576601191279'
  alias: obsolete - Plug-in Air Freshener Stop
  description: 'Turn off in the evening or when no one is home. Repeat as it sometimes
    doesn''t work '
  trigger:
  - at: '18:00:00'
    platform: time
  - platform: zone
    entity_id: person.richard
    zone: zone.home
    event: leave
  - platform: zone
    entity_id: person.lucy
    zone: zone.home
    event: leave
  condition: []
  action:
  - repeat:
      count: '2'
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id:
          - switch.plug_in_air_freshener_1
          - switch.plug_in_air_freshener_2
      - delay:
          hours: 0
          minutes: 10
          seconds: 0
          milliseconds: 0
  mode: single
- id: '1576601770197'
  alias: Welcome home Lucy
  description: 'Note: These actions can only be edited with YAML'
  trigger:
  - entity_id: person.lucy
    for: 00:05:00
    from: not_home
    platform: state
    to: home
  condition: []
  action:
  - data_template:
      cache: false
      entity_id: media_player.ground_floor
      message: "Welcome home Lucy. {% if is_state(\"person.richard\", \"home\")  %}
        Richard is also at home, please see him for cuddles! {%- else -%}\n    Richard
        is currently {{states('person.richard')}}, at\n{{states('sensor.richard_street_location')}}.
        {%- endif %} The heating is set to {{states('climate.entryway')}} at {{state_attr('climate.entryway',
        'temperature')| round(0) }}°C\n"
    service: tts.google_translate_say
- id: '1576602219341'
  alias: Keep Nest thermostat aware of our presence
  description: contindion template {{ state_attr('climate.entryway', 'preset_mode')
    == Away and Eco }}
  trigger:
  - minutes: /10
    platform: time_pattern
  - event: start
    platform: homeassistant
  - entity_id: binary_sensor.huishs_away
    from: 'off'
    platform: state
    to: 'on'
  condition:
  - condition: state
    entity_id: group.mobiles_group
    state: home
  - condition: state
    entity_id: binary_sensor.huishs_away
    state: 'on'
  action:
  - data:
      away_mode: home
    service: nest.set_away_mode
  - data:
      message: Nest forced back to heat mode while you are at home.
    service: notify.google_cloud_notify
- id: '1576603673930'
  alias: Close Chicken Door In The Evening Via Notification (action button has been
    clicked)
  description: Notification HTML5 push notification action button clicked
  trigger:
  - event_data:
      action: close_door
    event_type: html5_notification.clicked
    platform: event
  condition: []
  action:
  - entity_id: cover.chicken_coop_door
    service: cover.close_cover
  mode: single
- id: '1576603849046'
  alias: Close Chicken Door In The Evening Via Notification
  description: ''
  trigger:
  - event: sunset
    platform: sun
    offset: 01:30:00
  condition:
  - condition: state
    entity_id: binary_sensor.chicken_coop_status
    state: 'on'
  action:
  - service: notify.google_cloud_notify
    data:
      title: Chicken Bed-Time? [Home Assistant]
      message: It's dark, close chicken coop door?
      data:
        actions:
        - action: close_door
          title: "\U0001F6AACLOSE DOOR \U0001F414"
  mode: single
- id: '1581770041173'
  alias: 'Notify: Electricity supply voltage is LOW/HIGH'
  description: Send Notification when Electricity Voltage is Low or High
  trigger:
  - above: '254'
    entity_id: sensor.myups_input_voltage
    platform: numeric_state
  - below: '220'
    entity_id: sensor.myups_input_voltage
    platform: numeric_state
  condition: []
  action:
  - choose:
    - conditions:
      - condition: numeric_state
        entity_id: sensor.myups_input_voltage
        below: '220'
      sequence:
      - data:
          title: Electricity Supply Voltage Low
          message: 'Electricity Voltage Low: {{ states(''sensor.myups_input_voltage'')
            }} Volts. {{now().strftime(''%Y-%m-%d %I:%M %p'')}}

            '
        service: notify.google_cloud_notify
      - service: notify.pushover_notify
        data:
          title: Electricity Supply Voltage Low
          message: 'Electricity Voltage Low: {{ states(''sensor.myups_input_voltage'')
            }} Volts. {{now().strftime(''%Y-%m-%d %I:%M %p'')}}

            '
    - conditions:
      - condition: numeric_state
        entity_id: sensor.myups_input_voltage
        above: '254'
      sequence:
      - data:
          title: Electricity Supply Voltage High
          message: 'Electricity Voltage High: {{ states(''sensor.myups_input_voltage'')
            }} Volts. {{now().strftime(''%Y-%m-%d %I:%M %p'')}}

            '
        service: notify.google_cloud_notify
- id: '1581770321118'
  alias: 'Notify: UPS is close to being depleted'
  description: Send Notification when UPS is about to shutdown (10 mins left)
  trigger:
  - below: 600
    entity_id: sensor.myups_battery_runtime
    platform: numeric_state
  condition: []
  action:
  - data:
      message: 'UPS is running low: {{ (((states(''sensor.myups_battery_runtime'')
        | int) / 60) | int  )}} minutes left. {{now().strftime(''%Y-%m-%d %I:%M %p'')}}

        '
      title: 'WARNING: UPS close to being depleted'
    service: notify.google_cloud_notify
- id: '1581773259354'
  alias: Bunny shed status monitor notify
  description: Monitor the health of my gateways
  trigger:
  - entity_id: binary_sensor.bs_status
    for:
      hours: 0
      minutes: 10
      seconds: 0
    from: 'on'
    platform: state
    to: 'off'
  condition: []
  action:
  - data:
      message: Bunny Shed Controller has been offline for 10 mins. {{now().strftime('%Y-%m-%d
        %I:%M %p')}}
      title: Irrigation offline
    service: notify.google_cloud_notify
- id: '1581773123827'
  alias: 'Notify: Possible DDOS attack'
  trigger:
  - above: '70000'
    entity_id: sensor.pi_hole_dns_queries_today
    platform: numeric_state
  action:
  - data:
      message: 'DNS Queries: {{ states(''sensor.pi_hole_dns_queries_today'') }}

        '
      title: Possible DDOS Attack from inside network
    service: notify.google_cloud_notify
- id: '1581123123827'
  alias: Simulate Presence Lights
  description: Automation Simulate Presence / Occupancy Simulation
  trigger:
  - entity_id: person.richard
    from: home
    platform: state
    to: not_home
  - event: sunset
    offset: +00:30:00
    platform: sun
  - event_type: event_simulate_presence
    platform: event
  - entity_id: person.lucy
    from: home
    platform: state
    to: not_home
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: sun.sun
      state: below_horizon
    - before: '23:55:00'
      condition: time
    - condition: state
      entity_id: input_boolean.simulate_presence_enable
      state: 'on'
    - condition: state
      entity_id: person.lucy
      state: not_home
    - condition: state
      entity_id: person.richard
      state: not_home
  action:
  - data_template:
      entity_id: light.lamp_{{ (range(1, 4) | random) }}
    service: light.turn_on
  - delay: 00:{{ (range(10, 30) | random) }}:00
  - data_template:
      entity_id: light.lamp_{{ (range(1, 4) | random) }}
    service: light.turn_on
  - delay: 00:{{ (range(10, 30) | random) }}:00
  - entity_id: light.lamp_1
    service: light.turn_off
  - entity_id: light.lamp_2
    service: light.turn_off
  - entity_id: light.lamp_3
    service: light.turn_off
  - delay: 00:00:{{ (range(3, 10) | random) }}
  - event: event_simulate_presence
  mode: single
- id: '1586039811102'
  alias: Busylight Controller Free Button Pressed
  description: ''
  trigger:
  - device_id: 881a0e3accbc43d7b2bbc2b4559863b4
    domain: binary_sensor
    entity_id: binary_sensor.button_a
    platform: device
    type: turned_on
  condition: []
  action:
  - data: {}
    entity_id: script.1585906019835
    service: script.turn_on
- id: '1586039888917'
  alias: Busylight Controller Working Button Pressed
  description: ''
  trigger:
  - device_id: 881a0e3accbc43d7b2bbc2b4559863b4
    domain: binary_sensor
    entity_id: binary_sensor.button_b
    platform: device
    type: turned_on
  condition: []
  action:
  - data: {}
    entity_id: script.1585906111236
    service: script.turn_on
- id: '1586039921673'
  alias: Busylight Controller On Call Button Pressed
  description: ''
  trigger:
  - device_id: 881a0e3accbc43d7b2bbc2b4559863b4
    domain: binary_sensor
    entity_id: binary_sensor.button_c
    platform: device
    type: turned_on
  condition: []
  action:
  - data: {}
    entity_id: script.1585905714103
    service: script.turn_on
- id: '1586868059957'
  alias: House Doorbell Button External Notify
  description: Moved over to Companion App (from pushover)
  trigger:
  - device_id: b03ab12c707340e8849888171a79caed
    domain: binary_sensor
    entity_id: binary_sensor.doorbell_button
    platform: device
    type: turned_on
  condition: []
  action:
  - if:
    - condition: state
      entity_id: sensor.rich_mob_app_ringer_mode
      state: normal
    - condition: state
      entity_id: sensor.rich_mob_app_do_not_disturb_sensor
      state: 'off'
    - condition: state
      entity_id: sensor.rich_mob_app_audio_mode
      state: normal
    - condition: state
      entity_id: binary_sensor.rich_mob_app_music_active
      state: 'off'
      enabled: false
    then:
    - service: notify.mobile_app_rich_mob_app
      data:
        data:
          channel: DoorbellTTS2
          importance: high
          visibility: public
          tts_text: Ding Dong Doorbell
          media_stream: alarm_stream_max
          ttl: 0
          priority: high
        message: TTS
  - if:
    - condition: state
      entity_id: sensor.lucy_mob_app_ringer_mode
      state: normal
    - condition: state
      entity_id: sensor.lucy_mob_app_do_not_disturb_sensor
      state: 'off'
    - condition: state
      entity_id: sensor.lucy_mob_app_audio_mode
      state: normal
    - condition: state
      entity_id: binary_sensor.lucy_mob_app_music_active
      state: 'off'
      enabled: false
    then:
    - service: notify.mobile_app_lucy_mob_app
      data:
        data:
          channel: DoorbellTTS2
          importance: high
          visibility: public
          tts_text: Ding Dong Doorbell
          media_stream: alarm_stream_max
          ttl: 0
          priority: high
        message: TTS
  - service: notify.mobile_app_rich_mob_app
    data:
      message: Front Door Doorbell
      data:
        image: /api/camera_proxy/camera.front_door_11
        color: red
        channel: DoorbellImage2
        vibrationPattern: 100,200,100,100,75,25,100,200,100,500,100,200,100,500
        importance: high
        timeout: 86400
        visibility: public
        notification_icon: mdi:door
        ttl: 0
        priority: high
  - service: notify.mobile_app_lucy_mob_app
    data:
      message: Front Door Doorbell
      data:
        image: /api/camera_proxy/camera.front_door_11
        color: red
        channel: DoorbellImage2
        vibrationPattern: 100,200,100,100,75,25,100,200,100,500,100,200,100,500
        importance: high
        timeout: 86400
        visibility: public
        notification_icon: mdi:door
        ttl: 0
        priority: high
  - data:
      data:
        attachment: /config/www/tmp/front_door.jpg
      message: Photo
      title: Doorbell CCTV Photo
    service: notify.pushover_notify
    enabled: false
  - service: notify.mobile_app_rich_mob_app
    data:
      message: Photo
      data:
        image: /api/camera_proxy/camera.drive_higher_21
    enabled: false
  - data:
      filename: /config/www/tmp/front_door.jpg
    service: camera.snapshot
    entity_id: camera.front_door_11
    enabled: false
  - data:
      message: Ding Dong! Someone is at the door.
      title: Doorbell Alert
    service: notify.pushover_notify
    enabled: false
  - condition:
    - condition: state
      entity_id: sensor.mobile_app_rich_mob_app_ringer_mode
      state: normal
  mode: single
- id: '1587600361094'
  alias: Busylight Controller Away Button Pressed
  description: Set to turn off lights when controller goes offline
  trigger:
  - device_id: 90dc8f86fc67483880990d09cd5cf02c
    domain: binary_sensor
    entity_id: binary_sensor.busy_light_controller_status
    for:
      hours: 0
      minutes: 0
      seconds: 5
    platform: device
    type: not_connected
  condition: []
  action:
  - data: {}
    entity_id: script.1586361703646
    service: script.turn_on
  mode: single
- id: '1590103997253'
  alias: 'Server Getting Hot '
  description: ''
  trigger:
  - above: '65'
    entity_id: sensor.server_server_raid_controller_temperature
    platform: numeric_state
  condition: []
  action:
  - data:
      message: Server is getting HOT!
    service: notify.google_cloud_notify
- id: '1592486159377'
  alias: Parcel Box Opened Notify
  description: ''
  trigger:
  - type: opened
    platform: device
    device_id: 2aadd916ad46270ecda5ab407a461e6c
    entity_id: binary_sensor.parcel_box_contact
    domain: binary_sensor
  condition: []
  action:
  - data:
      message: Parcel box has just been opened
      title: Delivery
    service: notify.pushover_notify
    enabled: false
  - data:
      filename: /config/www/tmp/drive.jpg
    entity_id: camera.drive_high_16
    service: camera.snapshot
    enabled: false
  - data:
      data:
        attachment: /config/www/tmp/drive.jpg
      message: Delivery person?
      title: Driveway CCTV Photo
    service: notify.pushover_notify
    enabled: false
  - data:
      cache: false
      entity_id: media_player.whole_house
      message: Parcel box has just been opened
    service: tts.google_translate_say
    enabled: false
  - service: notify.mobile_app_rich_mob_app
    data:
      message: Parcel Box Opened
      data:
        image: /api/camera_proxy/camera.garage_13
        color: green
        channel: ParcelBox1
        vibrationPattern: 100,200,100,200,100,200,100,200
        importance: default
        timeout: 86400
        visibility: public
        notification_icon: mdi:package-variant-closed
    enabled: true
  - service: notify.mobile_app_lucy_mob_app
    data:
      message: Front Door Doorbell
      data:
        image: /api/camera_proxy/camera.garage_13
        color: green
        channel: ParcelBox1
        vibrationPattern: 100,200,100,200,100,200,100,200
        importance: default
        timeout: 86400
        visibility: public
        notification_icon: mdi:package-variant-closed
    enabled: true
  - data:
      filename: /config/www/tmp/garage.jpg
    service: camera.snapshot
    enabled: false
    target:
      entity_id:
      - camera.garage_13
  - service: notify.mobile_app_rich_mob_app
    data:
      message: Parcel Box Opened
      data:
        image: /local/tmp/garage.jpg
        color: green
        channel: ParcelBox1
        vibrationPattern: 100,200,100,200,100,200,100,200
        importance: default
        timeout: 86400
        visibility: public
        notification_icon: mdi:package-variant-closed
    enabled: false
  mode: single
- id: '1592498327466'
  alias: House Doorbell Button Local Notify (OLD)
  description: CCTV needs to have anonymous viewer enabled or I need to pass the username
    in the media_content_id. Note, during testing you need to turn off the media_player
    device after each test, else is will not show the video again.
  trigger:
  - device_id: b03ab12c707340e8849888171a79caed
    domain: binary_sensor
    entity_id: binary_sensor.doorbell_button
    platform: device
    type: turned_on
  condition:
  - condition: or
    conditions:
    - condition: zone
      entity_id: person.richard
      zone: zone.home
    - condition: zone
      entity_id: person.lucy
      zone: zone.home
  action:
  - data:
      media_content_id: http://192.168.4.11/axis-cgi/mjpg/video.cgi
      media_content_type: image/jpg
    service: media_player.play_media
    target:
      entity_id:
      - media_player.kitchen_display
      - media_player.office_display
      - media_player.bedroom_display_gen2
      - media_player.living_room_display
      - media_player.dining_room_display
  - data:
      cache: false
      entity_id: media_player.bathroom_speaker
      message: Ding! Dong! Someone is at the door
    service: tts.google_translate_say
  - data:
      cache: false
      entity_id: media_player.garage
      message: Ding! Dong! Someone is at the door
    service: tts.google_translate_say
  - delay:
      hours: 0
      minutes: 3
      seconds: 0
      milliseconds: 0
  - service: media_player.media_stop
    target:
      entity_id:
      - media_player.kitchen_display
      - media_player.office_display
      - media_player.bedroom_display_gen2
      - media_player.living_room_display
      - media_player.dining_room_display
    data: {}
  - data:
      media_content_id: http://192.168.4.11/axis-cgi/mjpg/video.cgi
      media_content_type: image/jpg
    service: media_player.play_media
    target:
      entity_id:
      - media_player.office_display
  mode: single
- id: '1601037277352'
  alias: Proximity/Perimeter Warning System - Primary and Secondary Zone Failure
  description: ''
  trigger:
  - platform: zone
    entity_id: device_tracker.google_maps_113691586554404814686
    zone: zone.outer_perimeter
    event: enter
  - platform: zone
    entity_id: device_tracker.google_maps_113691586554404814686
    zone: zone.inner_perimeter
    event: enter
  condition:
  - condition: or
    conditions:
    - condition: zone
      entity_id: person.richard
      zone: zone.home
    - condition: zone
      entity_id: person.lucy
      zone: zone.home
  action:
  - choose:
    - conditions:
      - condition: zone
        entity_id: device_tracker.google_maps_113691586554404814686
        zone: zone.inner_perimeter
      sequence:
      - service: notify.google_cloud_notify
        data:
          message: '!!Primary Zone Failure - Inner Perimeter!!'
      - service: notify.pushover_notify
        data:
          message: '!!Primary Zone Failure - Inner Perimeter!!'
          title: '!!Primary Zone Failure - Inner Perimeter!!'
          data:
            sound: alien
            priority: 1
      - service: script.flash_dining_room_lights
      - service: script.flash_dining_room_lights
      - data:
          cache: false
          entity_id: media_player.whole_house
          message: WOOP! WOOP! WOOP! WOOP! WOOP! ALERT:Warning! Primary Zone Failure!
            Warning! Primary Zone Failure! Warning! Primary Zone Failure! Close the
            fucking doors and windows for the love of bunnies hide! Arg!!!!
        service: tts.google_translate_say
    - conditions:
      - condition: zone
        entity_id: device_tracker.google_maps_113691586554404814686
        zone: zone.outer_perimeter
      sequence:
      - service: notify.google_cloud_notify
        data:
          message: Secondary Zone Failure - Outer Perimeter
      - service: notify.pushover_notify
        data:
          message: Secondary Zone Failure - Outer Perimeter
          title: Secondary Zone Failure - Outer Perimeter
          data:
            sound: tugboat
            priority: 0
      - data:
          cache: false
          entity_id: media_player.whole_house
          message: Notice! Secondary Zone Failure! Secondary Zone Failure - Outer
            Perimeter - Outer Perimeter
        service: tts.google_translate_say
  mode: single
- id: '1601317646616'
  alias: Front Lawn Anti Cat Defences
  description: FLAD
  trigger:
  - type: motion
    platform: device
    device_id: 99689212065c11ebbd2ecbef1587dfe1
    entity_id: binary_sensor.drive_high_16_vmd4_camera1profile2
    domain: binary_sensor
  condition:
  - condition: time
    after: input_datetime.fld_active_start
    before: input_datetime.fld_active_till
  - type: is_no_motion
    condition: device
    device_id: ed137229065c11eb8030a1dacd09fb94
    entity_id: binary_sensor.p3224_lv_0_vmd4_camera1profile2
    domain: binary_sensor
  - condition: device
    type: is_off
    device_id: 1a18e37d81f9eaee6c1870e944461b6b
    entity_id: light.outside_1_down
    domain: light
  action:
  - delay:
      hours: 0
      minutes: 0
      seconds: 0
      milliseconds: 10
  - service: switch.turn_on
    entity_id: switch.front_garden_lawn_irrigation_valve
  - delay:
      hours: 0
      minutes: 0
      seconds: 6
      milliseconds: 0
  - service: switch.turn_off
    entity_id: switch.front_garden_lawn_irrigation_valve
  - delay:
      hours: 0
      minutes: 10
      seconds: 0
      milliseconds: 0
  mode: restart
- id: '1607604378569'
  alias: AutoHotKey - Webhook Driven - Busy Light - Process Presence Incoming Webhook
  description: 'If the automation is not restarted within 6 minutes due to a new incoming
    webhook, the status is changed to offline.  Ref: https://github.com/ajobbins/AHK-Teams-Presence'
  trigger:
  - platform: webhook
    webhook_id: 6pKQYcAJY3kWdj56MVUYb4tWLr9QmGP7kKYBd5rMBz9r6ZBrQXyKhJPbuYR3vVkV
  condition: []
  action:
  - service: input_text.set_value
    data:
      value: '{{ trigger.json.status }}'
    entity_id: input_text.autohotkey1
  - delay: 00:06:00
  - service: input_text.set_value
    data:
      value: Offline
    entity_id: input_text.autohotkey1
  mode: restart
- id: '1607605238090'
  alias: AutoHotKey - Webhook Driven - Busy Light - Change Busy Light Colours
  description: 'Change an RGB light to signal presence. Ref: https://github.com/ajobbins/AHK-Teams-Presence'
  trigger:
  - platform: state
    entity_id: input_text.autohotkey1
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Available
      sequence:
      - service: light.turn_on
        data:
          color_name: green
          transition: 3
          brightness_pct: 100
        target:
          entity_id:
          - light.busy_light_2
          - light.busy_light_1
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Busy
      sequence:
      - service: light.turn_on
        data:
          color_name: red
          transition: 3
          brightness_pct: 100
        target:
          entity_id:
          - light.busy_light_2
          - light.busy_light_1
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: On The Phone
      sequence:
      - service: light.turn_on
        data:
          color_name: orange
          transition: 3
          brightness_pct: 100
        target:
          entity_id:
          - light.busy_light_2
          - light.busy_light_1
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: In A Meeting
      sequence:
      - service: light.turn_on
        data:
          color_name: orange
          transition: 3
          brightness_pct: 100
        target:
          entity_id:
          - light.busy_light_2
          - light.busy_light_1
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Do Not Disturb
      sequence:
      - service: light.turn_on
        data:
          color_name: blueviolet
          transition: 3
          brightness_pct: 100
        target:
          entity_id:
          - light.busy_light_2
          - light.busy_light_1
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Focusing
      sequence:
      - service: light.turn_on
        data:
          color_name: blueviolet
          transition: 3
          brightness_pct: 100
        target:
          entity_id:
          - light.busy_light_2
          - light.busy_light_1
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Presenting
      sequence:
      - service: light.turn_on
        data:
          color_name: red
          transition: 3
          brightness_pct: 100
        target:
          entity_id:
          - light.busy_light_2
          - light.busy_light_1
    - conditions:
      - condition: state
        entity_id: input_text.autohotkey1
        state: Away
      sequence:
      - service: light.turn_off
        target:
          entity_id:
          - light.busy_light_2
          - light.busy_light_1
        data:
          transition: 3
    default:
    - service: light.turn_off
      data:
        transition: 3
      target:
        entity_id:
        - light.busy_light_2
        - light.busy_light_1
  mode: restart
- id: '1608749551791'
  alias: Motion-activated Light [Blueprint]
  description: ''
  use_blueprint:
    path: homeassistant/motion_light.yaml
    input:
      motion_entity: binary_sensor.kichen_pir_sensor
      light_target:
        entity_id: light.kitchen_under_counter_lights
      no_motion_wait: '3600'
- id: '1612985120601'
  alias: obsolete - Ice Maker - On-Off Schedule [Blueprint]
  description: There is a separate automation which turns the ice maker on if the
    water temperature gets too warm. Also triggered by Fire Custom Event "ice_maker_back_online".
  use_blueprint:
    path: EPMatt/on_off_schedule_state_persistence.yaml
    input:
      off_time: '23:30:00'
      automation_target:
        entity_id: switch.ice_maker_switch
      on_time: 08:30:00
      trigger_at_homeassistant_startup: true
      custom_trigger_event: ice_maker_back_online
- id: '1612985880086'
  alias: 'obsolete - Ice Maker - Water High Temperature Action '
  description: Turn on the ice maker for a set time if the water temperature goes
    above a set threshold. Only run if ice maker is not already on.
  trigger:
  - platform: numeric_state
    entity_id: sensor.ice_maker_water_temperature
    above: input_number.ice_maker_water_high_temperature_threshold
  condition:
  - condition: device
    type: is_off
    device_id: 78678bdb2e4faa8982a4681b31f899ba
    entity_id: switch.ice_maker_switch
    domain: switch
  action:
  - type: turn_on
    device_id: 78678bdb2e4faa8982a4681b31f899ba
    entity_id: switch.ice_maker_switch
    domain: switch
  - delay:
      hours: 0
      minutes: 15
      seconds: 0
      milliseconds: 0
  - type: turn_off
    device_id: 78678bdb2e4faa8982a4681b31f899ba
    entity_id: switch.ice_maker_switch
    domain: switch
  mode: single
- id: '1614817579397'
  alias: 'emw100_d018_00 '
  description: ''
  trigger:
  - platform: state
    entity_id: light.emw100_d018_00
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: light.emw100_d018_00
        state: 'on'
      sequence:
      - type: turn_on
        device_id: f96140facdbde173c77c7f4b65915404
        entity_id: light.office
        domain: light
        brightness_pct: 100
      - service: light.turn_on
        data:
          rgb_color:
          - 255
          - 145
          - 145
        entity_id: light.office
    - conditions:
      - condition: state
        entity_id: light.emw100_d018_00
        state: 'off'
      sequence:
      - type: turn_off
        device_id: f96140facdbde173c77c7f4b65915404
        entity_id: light.office
        domain: light
    default: []
  mode: single
- id: '1619902648352'
  alias: Outside lights Chase
  description: ''
  trigger:
  - platform: device
    type: turned_on
    device_id: 271291f2388c4b78b8eb8bedf5ac1260
    entity_id: light.outside_2_down
    domain: light
  condition: []
  action:
  - service: light.turn_on
    target:
      device_id: 271291f2388c4b78b8eb8bedf5ac1260
    data:
      brightness_pct: 1
  - service: light.turn_on
    target:
      device_id: 271291f2388c4b78b8eb8bedf5ac1260
    data:
      transition: 4
      brightness_pct: 50
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: light.turn_on
    data:
      brightness_pct: 1
    target:
      device_id: 68c0780a08a2a488fafcf891c0c971bf
  - service: light.turn_on
    data:
      transition: 4
      brightness_pct: 50
    target:
      device_id: 68c0780a08a2a488fafcf891c0c971bf
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: light.turn_on
    data:
      brightness_pct: 1
    target:
      device_id: cb145ae0d47bb8242a1065359c1526a8
  - service: light.turn_on
    data:
      transition: 4
      brightness_pct: 50
    target:
      device_id: cb145ae0d47bb8242a1065359c1526a8
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: light.turn_on
    data:
      brightness_pct: 1
    target:
      device_id: ed8273e13c392387f265d1be36133415
  - service: light.turn_on
    data:
      transition: 4
      brightness_pct: 50
    target:
      device_id: ed8273e13c392387f265d1be36133415
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: light.turn_on
    data:
      brightness_pct: 1
    target:
      device_id: 8b55b43e0d5bf19f8f5eaf57f48f8448
  - service: light.turn_on
    data:
      transition: 4
      brightness_pct: 50
    target:
      device_id: 8b55b43e0d5bf19f8f5eaf57f48f8448
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: light.turn_on
    data:
      brightness_pct: 1
    target:
      device_id: a80228a582b8c1d77941665dba6266cd
  - service: light.turn_on
    data:
      transition: 4
      brightness_pct: 50
    target:
      device_id: a80228a582b8c1d77941665dba6266cd
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: light.turn_on
    data:
      brightness_pct: 1
    target:
      device_id: 752958ce41cdae33a5940fde71737e08
  - service: light.turn_on
    data:
      transition: 4
      brightness_pct: 50
    target:
      device_id: 752958ce41cdae33a5940fde71737e08
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: light.turn_on
    data:
      brightness_pct: 1
    target:
      device_id: 7f1a0dc66db6e1b172af0f4f1f84e190
  - service: light.turn_on
    data:
      transition: 4
      brightness_pct: 50
    target:
      device_id: 7f1a0dc66db6e1b172af0f4f1f84e190
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - service: light.turn_on
    data:
      brightness_pct: 1
    target:
      device_id: c3c520f03d6b5a91b336e63fe62cd7b9
  - service: light.turn_on
    data:
      transition: 4
      brightness_pct: 50
    target:
      device_id: c3c520f03d6b5a91b336e63fe62cd7b9
  - delay:
      hours: 0
      minutes: 5
      seconds: 0
      milliseconds: 0
  - service: light.turn_off
    target:
      device_id:
      - 68c0780a08a2a488fafcf891c0c971bf
      - ed8273e13c392387f265d1be36133415
      - a80228a582b8c1d77941665dba6266cd
      - 752958ce41cdae33a5940fde71737e08
      - 8b55b43e0d5bf19f8f5eaf57f48f8448
      - 7f1a0dc66db6e1b172af0f4f1f84e190
      - c3c520f03d6b5a91b336e63fe62cd7b9
      - 271291f2388c4b78b8eb8bedf5ac1260
  - service: light.turn_on
    target:
      device_id: cb145ae0d47bb8242a1065359c1526a8
    data:
      brightness_pct: 1
  mode: single
- id: '1619906359597'
  alias: Outside Lights Motion OLD
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 99689212065c11ebbd2ecbef1587dfe1
    entity_id: binary_sensor.p3364_l_0_vmd4_camera1profile3
    domain: binary_sensor
  - type: motion
    platform: device
    device_id: 853ca02c816df4ce4860c07060837a6a
    entity_id: binary_sensor.p3364_l_1_vmd4_camera1profile3
    domain: binary_sensor
  - type: motion
    platform: device
    device_id: ed137229065c11eb8030a1dacd09fb94
    entity_id: binary_sensor.p3224_lv_0_vmd4_camera1profile2
    domain: binary_sensor
  condition:
  - condition: or
    conditions:
    - condition: sun
      after: sunset
    - condition: sun
      before: sunrise
  action:
  - choose:
    - conditions:
      - condition: time
        after: 00:01
        before: 06:00
      sequence:
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_3_down
          - light.outside_5_down
        data:
          brightness_pct: 1
          color_temp: 352
      - delay:
          hours: 0
          minutes: 0
          seconds: 2
          milliseconds: 0
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_3_down
          - light.outside_5_down
        data:
          brightness_pct: 30
          transition: 5
      - delay:
          hours: 0
          minutes: 0
          seconds: 8
          milliseconds: 0
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_3_down
          - light.outside_5_down
        data:
          brightness_pct: 30
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_3_down
          - light.outside_5_down
        data:
          brightness_pct: 1
          transition: 10
    default:
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_down
        - light.outside_1_up
        - light.outside_2_down
        - light.outside_2_up
        - light.outside_3_down
        - light.outside_3_up
        - light.outside_3_down
        - light.outside_3_up
        - light.outside_5_down
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 2
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_down
        - light.outside_2_down
        - light.outside_3_down
        - light.outside_3_down
        - light.outside_5_down
      data:
        brightness_pct: 100
        transition: 10
    - delay:
        hours: 0
        minutes: 0
        seconds: 2
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_up
        - light.outside_2_up
        - light.outside_3_up
        - light.outside_3_up
      data:
        brightness_pct: 100
        transition: 8
    - delay:
        hours: 0
        minutes: 0
        seconds: 10
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_down
        - light.outside_1_up
        - light.outside_2_down
        - light.outside_2_up
        - light.outside_3_down
        - light.outside_3_up
        - light.outside_3_down
        - light.outside_3_up
        - light.outside_5_down
      data:
        brightness_pct: 100
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_down
        - light.outside_1_up
        - light.outside_2_down
        - light.outside_2_up
        - light.outside_3_down
        - light.outside_3_up
        - light.outside_3_down
        - light.outside_3_up
        - light.outside_5_down
      data:
        brightness_pct: 1
        transition: 10
  - delay:
      hours: 0
      minutes: 0
      seconds: 15
      milliseconds: 0
  - service: light.turn_off
    target:
      entity_id:
      - light.outside_1_down
      - light.outside_1_up
      - light.outside_2_down
      - light.outside_2_up
      - light.outside_3_down
      - light.outside_3_up
      - light.outside_3_down
      - light.outside_3_up
      - light.outside_5_down
  - delay:
      hours: 0
      minutes: 0
      seconds: 2
      milliseconds: 0
  - choose:
    - conditions:
      - condition: time
        before: input_datetime.house_sign_light_off_time
        after: '16:00'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 1
          white_value: 250
        target:
          entity_id:
          - light.outside_2_down
    default: []
  mode: single
- id: '1619906809678'
  alias: Outside Lights - House Number Sign Light Schedule
  description: ' Use wait to ensure the Choose action for time is after the trigger
    time, not on the time.'
  trigger:
  - platform: sun
    event: sunset
    offset: +01:00:00
  - platform: time
    at: input_datetime.house_sign_light_off_time
  condition: []
  action:
  - choose:
    - conditions:
      - condition: time
        after: input_datetime.house_sign_light_off_time
      sequence:
      - service: light.turn_off
        target:
          entity_id:
          - light.outside_2_down
    - conditions:
      - condition: and
        conditions:
        - condition: sun
          after: sunset
        - condition: time
          before: input_datetime.house_sign_light_off_time
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 1
        target:
          entity_id:
          - light.outside_2_down
    default:
    - service: light.turn_off
      target:
        entity_id:
        - light.outside_2_down
  mode: single
- id: '1620377256377'
  alias: obsolete - Ice Maker - Back Online - Fire Custom Event "ice_maker_back_online"
  description: Fires a custom event onto the event bus, which the icemaker schedule
    blueprint monitors and uses as an additional trigger to its automation.
  trigger:
  - type: connected
    platform: device
    device_id: 78678bdb2e4faa8982a4681b31f899ba
    entity_id: binary_sensor.ice_maker_status
    domain: binary_sensor
  condition: []
  action:
  - event: ice_maker_back_online
  mode: single
- id: '1621103260448'
  alias: Ice Maker - On-Off Automation
  description: 'On-Off Schedule with presence awareness, state restoration and high
    temperature alarm (Turn on the ice maker for a set time if the water temperature
    goes above a set threshold. Only run if ice maker is not already on). Removes
    the previous blueprint and other automations. Note: Zone trigger does not support
    delay, hence the use of the state trigger for presence awareness (to avoid frequent  switch
    cycling whilst at home with poor location accuracy)'
  trigger:
  - platform: time
    at: input_datetime.ice_maker_on_time
  - platform: time
    at: input_datetime.ice_maker_off_time
  - platform: homeassistant
    event: start
  - type: connected
    platform: device
    device_id: 78678bdb2e4faa8982a4681b31f899ba
    entity_id: binary_sensor.ice_maker_status
    domain: binary_sensor
  - platform: zone
    entity_id: person.richard
    zone: zone.home
    event: leave
  - platform: zone
    entity_id: person.richard
    zone: zone.home
    event: enter
  - platform: numeric_state
    entity_id: sensor.ice_maker_water_temperature
    above: input_number.ice_maker_water_high_temperature_threshold
  condition: []
  action:
  - choose:
    - conditions:
      - condition: time
        after: input_datetime.ice_maker_off_time
      sequence:
      - type: turn_off
        device_id: 78678bdb2e4faa8982a4681b31f899ba
        entity_id: switch.ice_maker_switch
        domain: switch
    - conditions:
      - condition: time
        after: input_datetime.ice_maker_on_time
        before: input_datetime.ice_maker_off_time
      - condition: zone
        entity_id: person.richard
        zone: zone.home
      sequence:
      - type: turn_on
        device_id: 78678bdb2e4faa8982a4681b31f899ba
        entity_id: switch.ice_maker_switch
        domain: switch
    - conditions:
      - condition: numeric_state
        entity_id: sensor.ice_maker_water_temperature
        above: input_number.ice_maker_water_high_temperature_threshold
      - condition: device
        type: is_off
        device_id: 78678bdb2e4faa8982a4681b31f899ba
        entity_id: switch.ice_maker_switch
        domain: switch
      sequence:
      - type: turn_on
        device_id: 78678bdb2e4faa8982a4681b31f899ba
        entity_id: switch.ice_maker_switch
        domain: switch
      - delay:
          hours: 0
          minutes: 15
          seconds: 0
          milliseconds: 0
      - type: turn_off
        device_id: 78678bdb2e4faa8982a4681b31f899ba
        entity_id: switch.ice_maker_switch
        domain: switch
    default:
    - type: turn_off
      device_id: 78678bdb2e4faa8982a4681b31f899ba
      entity_id: switch.ice_maker_switch
      domain: switch
  mode: restart
- id: '1621109022540'
  alias: Close Chicken Door  Notification (App)
  description: ''
  trigger:
  - event: sunset
    platform: sun
    offset: 01:30:00
  condition:
  - type: is_connected
    condition: device
    device_id: 40e46b6c7835f9e576bf8c7d148b90ea
    entity_id: binary_sensor.chicken_house_sensor_status
    domain: binary_sensor
  action:
  - service: notify.mobile_app_pixel_4_app
  mode: single
- id: '1626459943924'
  alias: Water on off
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.button_1
    from: 'on'
    to: 'off'
  - platform: state
    entity_id:
    - switch.button_1
    from: 'off'
    to: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: switch.button_1
        state: 'on'
      sequence:
      - service: switch.turn_on
        target:
          entity_id: switch.back_garden_irrigation_valve
        data: {}
    - conditions:
      - condition: state
        entity_id: switch.button_1
        state: 'off'
      sequence:
      - service: switch.turn_off
        target:
          entity_id: switch.back_garden_irrigation_valve
        data: {}
    default: []
  mode: single
- id: '1631609930867'
  alias: Wake-up light alarm with sunrise effect - [BluePrint]
  description: ''
  use_blueprint:
    path: sbyx/wake-up-light-alarm-with-sunrise-effect.yaml
    input:
      light_entity: light.richard_bedside_bed
      timestamp_sensor: sensor.rich_mob_app_next_alarm
      manual_time: 09:00:00
      check_entity: person.richard
      sunrise_duration: 15
      start_brightness: 3
- id: '1634179399421'
  alias: Notify when Lucy leaves her pump at home
  description: ''
  trigger:
  - platform: state
    entity_id:
    - person.lucy
    from: home
    to: not_home
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: zone
    entity_id: device_tracker.insulin_pump_controller
    zone: zone.home
  action:
  - service: notify.mobile_app_rich_mob_app
    data:
      message: Lucy Pump Controller was left at Home!
  - service: notify.mobile_app_lucy_mob_app
    data:
      message: Lucy Pump Controller was left at Home!
  mode: single
- id: '1635187432504'
  alias: Outside Lights Motion Slow Fade
  description: Main Lights Profile
  trigger:
  - type: motion
    platform: device
    device_id: 99689212065c11ebbd2ecbef1587dfe1
    entity_id: binary_sensor.drive_high_16_vmd4_camera1profile3
    domain: binary_sensor
  condition:
  - condition: or
    conditions:
    - condition: sun
      after: sunset
      after_offset: +00:30:00
    - condition: sun
      before: sunrise
      before_offset: -00:30:00
  action:
  - choose:
    - conditions:
      - condition: time
        after: input_datetime.outside_lights_late_night_start_time
        before: input_datetime.outside_lights_late_night_end_time
      sequence:
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_4_down
          - light.outside_5_down
        data:
          brightness_pct: '{{ states(''input_number.outside_lights_late_night_brightness'')
            | int(0) }}'
          color_temp: 352
      - delay:
          minutes: '{{ states(''input_number.outside_lights_late_night_time_on_minutes'')
            | int(0) }}'
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_4_down
          - light.outside_5_down
        data:
          brightness_pct: 1
          transition: 10
    default:
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_down
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
        transition: '{{ states(''input_number.outside_lights_early_night_per_light_transition_time_seconds'')
          | int(0) }}'
    - delay:
        milliseconds: '{{ states(''input_number.outside_lights_early_night_time_between_lights_milliseconds'')
          | int(0) }}'
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_2_down
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
        transition: '{{ states(''input_number.outside_lights_early_night_per_light_transition_time_seconds'')
          | int(0) }}'
    - delay:
        milliseconds: '{{ states(''input_number.outside_lights_early_night_time_between_lights_milliseconds'')
          | int(0) }}'
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_down
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
        transition: '{{ states(''input_number.outside_lights_early_night_per_light_transition_time_seconds'')
          | int(0) }}'
    - delay:
        milliseconds: '{{ states(''input_number.outside_lights_early_night_time_between_lights_milliseconds'')
          | int(0) }}'
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_4_down
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
        transition: '{{ states(''input_number.outside_lights_early_night_per_light_transition_time_seconds'')
          | int(0) }}'
    - delay:
        milliseconds: '{{ states(''input_number.outside_lights_early_night_time_between_lights_milliseconds'')
          | int(0) }}'
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_5_down
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
        transition: '{{ states(''input_number.outside_lights_early_night_per_light_transition_time_seconds'')
          | int(0) }}'
    - delay:
        milliseconds: '{{ states(''input_number.outside_lights_early_night_time_between_lights_milliseconds'')
          | int(0) }}'
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_4_up
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
        transition: '{{ states(''input_number.outside_lights_early_night_per_light_transition_time_seconds'')
          | int(0) }}'
    - delay:
        milliseconds: '{{ states(''input_number.outside_lights_early_night_time_between_lights_milliseconds'')
          | int(0) }}'
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_up
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
        transition: '{{ states(''input_number.outside_lights_early_night_per_light_transition_time_seconds'')
          | int(0) }}'
    - delay:
        milliseconds: '{{ states(''input_number.outside_lights_early_night_time_between_lights_milliseconds'')
          | int(0) }}'
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_2_up
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
        transition: '{{ states(''input_number.outside_lights_early_night_per_light_transition_time_seconds'')
          | int(0) }}'
    - delay:
        milliseconds: '{{ states(''input_number.outside_lights_early_night_time_between_lights_milliseconds'')
          | int(0) }}'
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_up
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
        transition: '{{ states(''input_number.outside_lights_early_night_per_light_transition_time_seconds'')
          | int(0) }}'
    - delay:
        milliseconds: '{{ states(''input_number.outside_lights_early_night_time_between_lights_milliseconds'')
          | int(0) }}'
    - delay:
        hours: 0
        minutes: 0
        seconds: 60
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_up
        - light.outside_1_down
        - light.outside_2_up
        - light.outside_2_down
        - light.outside_3_up
        - light.outside_3_down
        - light.outside_4_up
        - light.outside_4_down
        - light.outside_5_down
      data:
        brightness_pct: '{{ states(''input_number.outside_lights_early_night_brightness'')
          | int(0) }}'
    - delay:
        minutes: '{{ states(''input_number.outside_lights_early_night_time_on_minutes'')
          | int(0) }}'
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_up
        - light.outside_1_down
        - light.outside_2_up
        - light.outside_2_down
        - light.outside_3_up
        - light.outside_3_down
        - light.outside_4_up
        - light.outside_4_down
        - light.outside_5_down
      data:
        brightness_pct: 1
        transition: 10
  - delay:
      hours: 0
      minutes: 0
      seconds: 15
      milliseconds: 0
  - service: light.turn_off
    target:
      entity_id:
      - light.outside_1_up
      - light.outside_1_down
      - light.outside_2_up
      - light.outside_2_down
      - light.outside_3_up
      - light.outside_3_down
      - light.outside_4_up
      - light.outside_4_down
      - light.outside_5_down
    data: {}
  - delay:
      hours: 0
      minutes: 0
      seconds: 4
      milliseconds: 0
  - choose:
    - conditions:
      - condition: time
        before: input_datetime.house_sign_light_off_time
        after: '16:00'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 1
          white_value: 250
        target:
          entity_id:
          - light.outside_2_down
    default: []
  mode: single
- id: '1641665255926'
  alias: '[Backup]: Outside Lights Motion Slow Fade (Duplicate)'
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 99689212065c11ebbd2ecbef1587dfe1
    entity_id: binary_sensor.p3364_l_0_vmd4_camera1profile3
    domain: binary_sensor
  condition:
  - condition: or
    conditions:
    - condition: sun
      after: sunset
    - condition: sun
      before: sunrise
  action:
  - choose:
    - conditions:
      - condition: time
        after: '22:00'
        before: 06:00
      sequence:
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_4_down
          - light.outside_5_down
        data:
          brightness_pct: 1
          color_temp: 352
      - delay:
          hours: 0
          minutes: 0
          seconds: 1
          milliseconds: 0
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_4_down
          - light.outside_5_down
        data:
          brightness_pct: 30
          transition: 5
      - delay:
          hours: 0
          minutes: 0
          seconds: 8
          milliseconds: 0
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_4_down
          - light.outside_5_down
        data:
          brightness_pct: 30
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      - service: light.turn_on
        target:
          entity_id:
          - light.outside_1_down
          - light.outside_2_down
          - light.outside_3_down
          - light.outside_4_down
          - light.outside_5_down
        data:
          brightness_pct: 1
          transition: 10
    default:
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_down
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 150
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_down
      data:
        brightness_pct: 100
        transition: 3
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_up
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 150
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_up
      data:
        brightness_pct: 100
        transition: 3
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_2_down
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 150
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_2_down
      data:
        brightness_pct: 100
        transition: 3
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_2_up
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 150
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_2_up
      data:
        brightness_pct: 100
        transition: 3
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_down
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 150
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_down
      data:
        brightness_pct: 100
        transition: 3
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_up
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 150
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_up
      data:
        brightness_pct: 100
        transition: 3
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_down
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 150
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_down
      data:
        brightness_pct: 100
        transition: 3
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_up
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 150
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_3_up
      data:
        brightness_pct: 100
        transition: 3
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_5_down
      data:
        brightness_pct: 1
        color_temp: 352
    - delay:
        hours: 0
        minutes: 0
        seconds: 0
        milliseconds: 150
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_5_down
      data:
        brightness_pct: 100
        transition: 3
    - delay:
        hours: 0
        minutes: 0
        seconds: 1
        milliseconds: 0
    - delay:
        hours: 0
        minutes: 0
        seconds: 10
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_down
        - light.outside_1_up
        - light.outside_2_down
        - light.outside_2_up
        - light.outside_3_down
        - light.outside_3_up
        - light.outside_4_down
        - light.outside_5_down
      data:
        brightness_pct: 100
    - delay:
        hours: 0
        minutes: 5
        seconds: 0
        milliseconds: 0
    - service: light.turn_on
      target:
        entity_id:
        - light.outside_1_down
        - light.outside_1_up
        - light.outside_2_down
        - light.outside_2_up
        - light.outside_3_down
        - light.outside_3_up
        - light.outside_4_down
        - light.outside_5_down
      data:
        brightness_pct: 1
        transition: 10
  - delay:
      hours: 0
      minutes: 0
      seconds: 15
      milliseconds: 0
  - service: light.turn_off
    target:
      entity_id:
      - light.outside_1_down
      - light.outside_1_up
      - light.outside_2_down
      - light.outside_2_up
      - light.outside_3_down
      - light.outside_3_up
      - light.outside_4_down
      - light.outside_5_down
  - delay:
      hours: 0
      minutes: 0
      seconds: 1
      milliseconds: 0
  - choose:
    - conditions:
      - condition: time
        before: input_datetime.house_sign_light_off_time
        after: '16:00'
      sequence:
      - service: light.turn_on
        data:
          brightness_pct: 1
          white_value: 250
        target:
          entity_id:
          - light.outside_2_down
    default: []
  mode: single
- id: '1648768380853'
  alias: Outside Lights Motion Driveway Long
  description: Activate Door Light from distance, will not run if other automation
    is running (hopefully), Will not run if the lights are already on (if the lights
    have already been triggered from another automation)
  trigger:
  - type: motion
    platform: device
    device_id: 99689212065c11ebbd2ecbef1587dfe1
    entity_id: binary_sensor.drive_high_16_vmd4_profile_1
    domain: binary_sensor
    enabled: true
  condition:
  - condition: and
    conditions:
    - condition: or
      conditions:
      - condition: sun
        after: sunset
        after_offset: +00:30:00
      - condition: sun
        before: sunrise
        before_offset: -00:30:00
    - condition: device
      type: is_off
      device_id: 68c0780a08a2a488fafcf891c0c971bf
      entity_id: light.outside_1_up
      domain: light
  action:
  - service: light.turn_on
    target:
      entity_id:
      - light.outside_1_down
    data:
      brightness_pct: '{{ states(''input_number.outside_lights_late_night_brightness'')
        | int(0) }}'
  - delay:
      minutes: '{{ states(''input_number.outside_lights_late_night_time_on_minutes'')
        | int(0) }}'
  - service: light.turn_off
    data:
      transition: 10
    target:
      entity_id: light.outside_1_down
  mode: restart
- id: '1652208601188'
  alias: House Doorbell Button Local Notify (Duplicate)
  description: Update CCTV no longer needs to have anonymous viewer enabled, as its
    using the local media-source. ...CCTV needs to have anonymous viewer enabled or
    I need to pass the username in the media_content_id. Note, during testing you
    need to turn off the media_player device after each test, else is will not show
    the video again.
  trigger:
  - device_id: b03ab12c707340e8849888171a79caed
    domain: binary_sensor
    entity_id: binary_sensor.doorbell_button
    platform: device
    type: turned_on
  condition:
  - condition: or
    conditions:
    - condition: zone
      entity_id: person.richard
      zone: zone.home
    - condition: zone
      entity_id: person.lucy
      zone: zone.home
  action:
  - parallel:
    - service: media_player.play_media
      target:
        entity_id:
        - media_player.kitchen_display
        - media_player.office_display
        - media_player.bedroom_display_gen2
        - media_player.living_room_display
        - media_player.dining_room_display
      data:
        media_content_id: media-source://camera/camera.front_door_11
        media_content_type: application/vnd.apple.mpegurl
    - service: media_player.play_media
      target:
        entity_id: media_player.dining_room_display
      data:
        media_content_id: media-source://camera/camera.drive_high_16
        media_content_type: application/vnd.apple.mpegurl
      metadata:
        title: P3364-L 0
        thumbnail: /api/camera_proxy/camera.drive_high_16
        media_class: video
        children_media_class:
        navigateIds:
        - {}
        - media_content_type: app
          media_content_id: media-source://camera
    - service: tts.google_translate_say
      data:
        message: Ding! Dong! Someone is at the door
        entity_id: media_player.bathroom_speaker, media_player.garage, media_player.guest_bedroom
        cache: true
  - delay:
      hours: 0
      minutes: 3
      seconds: 0
      milliseconds: 0
  - service: media_player.media_stop
    target:
      entity_id:
      - media_player.kitchen_display
      - media_player.office_display
      - media_player.bedroom_display_gen2
      - media_player.living_room_display
      - media_player.dining_room_display
    data: {}
  mode: single
- id: '1652210144322'
  alias: House Doorbell Button Local Notify (Improved)
  description: CCTV needs to have anonymous viewer enabled or I need to pass the username
    in the media_content_id. Note, during testing you need to turn off the media_player
    device after each test, else is will not show the video again. (local media-source
    is 30 seconds behind!)
  trigger:
  - device_id: b03ab12c707340e8849888171a79caed
    domain: binary_sensor
    entity_id: binary_sensor.doorbell_button
    platform: device
    type: turned_on
  condition:
  - condition: or
    conditions:
    - condition: zone
      entity_id: person.richard
      zone: zone.home
    - condition: zone
      entity_id: person.lucy
      zone: zone.home
  action:
  - parallel:
    - service: media_player.play_media
      data:
        media_content_id: http://192.168.4.11/axis-cgi/mjpg/video.cgi
        media_content_type: image/jpg
      target:
        entity_id:
        - media_player.office_display
        - media_player.living_room_display
        - media_player.kitchen_display
      enabled: false
    - service: media_player.play_media
      data:
        media_content_id: media-source://camera/camera.front_door_11
        media_content_type: application/vnd.apple.mpegurl
      target:
        entity_id:
        - media_player.office_display
        - media_player.living_room_display
        - media_player.kitchen_display
      enabled: false
    - service: camera.play_stream
      data:
        format: hls
        media_player: media_player.office_display
      target:
        entity_id: camera.front_door_11_onvif_video
      enabled: false
    - service: camera.play_stream
      data:
        format: hls
        media_player: media_player.office_display
      target:
        entity_id:
        - camera.front_door_11_mjpg
      enabled: false
    - service: camera.play_stream
      data:
        format: hls
        media_player: media_player.office_display
      target:
        entity_id:
        - camera.front_door_11
      enabled: false
    - service: tts.google_translate_say
      data:
        message: Ding! Dong! Someone is at the door
        entity_id: media_player.bathroom_speaker, media_player.garage, media_player.guest_bedroom
        cache: true
      enabled: false
    - service: notify.google_assistant_sdk
      data:
        message: Ding! Dong! Someone is at the door
        target:
        - bathroom_speaker
        - garage
        - guest_bedroom
        - bedroom
    - service: media_player.play_media
      target:
        entity_id: media_player.living_room_display
      data:
        media_content_id: media-source://camera/camera.front_door_11_onvif_video
        media_content_type: application/vnd.apple.mpegurl
      metadata:
        title: Front Door .11 ONVIF profile_1 h264
        thumbnail: /api/camera_proxy/camera.front_door_11_onvif_video
        media_class: video
        children_media_class:
        navigateIds:
        - {}
        - media_content_type: app
          media_content_id: media-source://camera
    - service: media_player.play_media
      target:
        entity_id: media_player.dining_room_display
      data:
        media_content_id: media-source://camera/camera.drive_higher_21_onvif_profile_1_h264
        media_content_type: application/vnd.apple.mpegurl
      metadata:
        title: Drive Higher .21 ONVIF profile_1 h264
        thumbnail: /api/camera_proxy/camera.drive_higher_21_onvif_profile_1_h264
        media_class: video
        children_media_class:
        navigateIds:
        - {}
        - media_content_type: app
          media_content_id: media-source://camera
    - service: media_player.play_media
      target:
        entity_id: media_player.office_display
      data:
        media_content_id: media-source://camera/camera.front_door_11_onvif_video
        media_content_type: application/vnd.apple.mpegurl
      metadata:
        title: Front Door .11 ONVIF profile_1 h264
        thumbnail: /api/camera_proxy/camera.front_door_11_onvif_video
        media_class: video
        children_media_class:
        navigateIds:
        - {}
        - media_content_type: app
          media_content_id: media-source://camera
      enabled: true
    - service: media_player.play_media
      target:
        entity_id: media_player.kitchen_display
      data:
        media_content_id: media-source://camera/camera.front_door_11_onvif_video
        media_content_type: application/vnd.apple.mpegurl
      metadata:
        title: Front Door .11 ONVIF profile_1 h264
        thumbnail: /api/camera_proxy/camera.front_door_11_onvif_video
        media_class: video
        children_media_class:
        navigateIds:
        - {}
        - media_content_type: app
          media_content_id: media-source://camera
  - delay:
      hours: 0
      minutes: 2
      seconds: 0
      milliseconds: 0
    enabled: false
  - service: media_player.turn_off
    data: {}
    target:
      entity_id:
      - media_player.office_display
      - media_player.living_room_display
      - media_player.kitchen_display
      - media_player.dining_room_display
    enabled: false
  mode: single
- id: '1658535783719'
  alias: 'Downstairs Lights Motion '
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: a4d9035dcf8d5c8cad4f0a74d46b0c86
    entity_id: binary_sensor.ikea_motion_sensor_1_occupancy
    domain: binary_sensor
  - type: no_motion
    platform: device
    device_id: a4d9035dcf8d5c8cad4f0a74d46b0c86
    entity_id: binary_sensor.ikea_motion_sensor_1_occupancy
    domain: binary_sensor
  condition: []
  action:
  - choose:
    - conditions:
      - type: is_off
        condition: device
        device_id: a4d9035dcf8d5c8cad4f0a74d46b0c86
        entity_id: binary_sensor.ikea_motion_sensor_1_illuminance_above_threshold
        domain: binary_sensor
      - type: is_motion
        condition: device
        device_id: a4d9035dcf8d5c8cad4f0a74d46b0c86
        entity_id: binary_sensor.ikea_motion_sensor_1_occupancy
        domain: binary_sensor
      sequence:
      - service: light.turn_on
        data: {}
        target:
          entity_id: light.downstairs_hall_light
    default:
    - service: light.turn_off
      data: {}
      target:
        entity_id: light.downstairs_hall_light
  mode: single
- id: '1658705666302'
  alias: Living Room Lights Motion 6f3c
  description: ''
  trigger:
  - type: motion
    platform: device
    device_id: 04d4977d22e3ffbd2049e4ffd0d0d54d
    entity_id: binary_sensor.ikea_motion_sensor_6f3c_occupancy
    domain: binary_sensor
  - type: no_motion
    platform: device
    device_id: 04d4977d22e3ffbd2049e4ffd0d0d54d
    entity_id: binary_sensor.ikea_motion_sensor_6f3c_occupancy
    domain: binary_sensor
  condition: []
  action:
  - choose:
    - conditions:
      - type: is_off
        condition: device
        device_id: 04d4977d22e3ffbd2049e4ffd0d0d54d
        entity_id: binary_sensor.ikea_motion_sensor_6f3c_illuminance_above_threshold
        domain: binary_sensor
        enabled: false
      - type: is_motion
        condition: device
        device_id: 04d4977d22e3ffbd2049e4ffd0d0d54d
        entity_id: binary_sensor.ikea_motion_sensor_6f3c_occupancy
        domain: binary_sensor
      sequence:
      - service: light.turn_on
        data: {}
        target:
          entity_id:
          - light.living_room_cabinet_inside
          - light.living_room_cabinet_front
    default:
    - service: light.turn_off
      data: {}
      target:
        entity_id:
        - light.living_room_cabinet_inside
        - light.living_room_cabinet_front
  mode: single
- id: '1659697088299'
  alias: Garden Watering Remote Control Ikea Blind Open
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: 81786cb2bdf60505bef7710dd57270ae
    type: action
    subtype: open
    discovery_id: 0x000d6ffffea20000 action_open
  condition: []
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.back_garden_irrigation_valve
  mode: single
- id: '1659697287602'
  alias: Garden Watering Remote Control Ikea Blind Close
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: 81786cb2bdf60505bef7710dd57270ae
    type: action
    subtype: close
    discovery_id: 0x000d6ffffea20000 action_close
  condition: []
  action:
  - service: switch.turn_off
    data: {}
    target:
      entity_id: switch.back_garden_irrigation_valve
  mode: single
- id: '1660674900866'
  alias: Living Room TV Speakers Auto On-Off
  description: ''
  trigger:
  - platform: device
    type: changed_states
    device_id: aa1e8f5d6dcb943b167eae97d9b8f05b
    entity_id: media_player.tv_samsung_7_series_65
    domain: media_player
  condition: []
  action:
  - choose:
    - conditions:
      - condition: device
        device_id: aa1e8f5d6dcb943b167eae97d9b8f05b
        domain: media_player
        entity_id: media_player.tv_samsung_7_series_65
        type: is_idle
      sequence:
      - type: turn_on
        device_id: 8c3077e0600e4f78a7427ec178ee4e36
        entity_id: switch.tv_speakers_plug
        domain: switch
    - conditions:
      - condition: state
        entity_id: media_player.tv_samsung_7_series_65
        state: unavailable
      sequence:
      - type: turn_off
        device_id: 8c3077e0600e4f78a7427ec178ee4e36
        entity_id: switch.tv_speakers_plug
        domain: switch
    default: []
  mode: single
- id: '1661547535107'
  alias: Occupancy Kitchen (Rev 1)
  description: Triggered in motion, restarted on fresh motion detection (sensors set
    to 90 second timeout). On timer delay turn-off section, checks if motion is still
    being detected, to avoid issue with motion being continuity detected for entire
    delay period (otherwise lights would turn off, as no new motion events had been
    generated, even though motion is still true). Could set the automation to only
    turn off lights when no motion is detected, but this may risk the lights staying
    on all the time if off-motion event is not triggered.
  trigger:
  - type: motion
    platform: device
    device_id: ae2a09aff2b5e7ef8155aa0aea2ae997
    entity_id: binary_sensor.kitchen_motion_sensor_1_occupancy
    domain: binary_sensor
  - type: motion
    platform: device
    device_id: 8f93f025843a9a3da3c079739843e408
    entity_id: binary_sensor.kitchen_motion_sensor_2_occupancy
    domain: binary_sensor
  - platform: event
    event_type: kitchen_occupied
  - type: motion
    platform: device
    device_id: 04d4977d22e3ffbd2049e4ffd0d0d54d
    entity_id: 28a3386f16c485cc33b63825d1ee3184
    domain: binary_sensor
  condition: []
  action:
  - choose:
    - conditions:
      - condition: time
        after: 02:00:00
        before: 07:00:00
      sequence:
      - service: light.turn_on
        data:
          transition: 2
          brightness_pct: 50
        target:
          entity_id:
          - light.kitchen_lights
      - delay:
          hours: 0
          minutes: 5
          seconds: 0
          milliseconds: 0
      - choose:
        - conditions:
          - condition: or
            conditions:
            - type: is_motion
              condition: device
              device_id: ae2a09aff2b5e7ef8155aa0aea2ae997
              entity_id: binary_sensor.kitchen_motion_sensor_1_occupancy
              domain: binary_sensor
            - type: is_motion
              condition: device
              device_id: 8f93f025843a9a3da3c079739843e408
              entity_id: binary_sensor.kitchen_motion_sensor_2_occupancy
              domain: binary_sensor
          sequence:
          - event: kitchen_occupied
            event_data: {}
        default:
        - service: light.turn_off
          data:
            transition: 20
          target:
            entity_id:
            - light.kitchen
    default:
    - service: light.turn_on
      data:
        transition: 2
        brightness_pct: 100
      target:
        entity_id:
        - light.kitchen_lights
    - service: light.turn_on
      data: {}
      target:
        entity_id: light.christmas_tree_lights
      enabled: false
    - delay:
        hours: 0
        minutes: 10
        seconds: 0
        milliseconds: 0
    - choose:
      - conditions:
        - condition: or
          conditions:
          - type: is_motion
            condition: device
            device_id: ae2a09aff2b5e7ef8155aa0aea2ae997
            entity_id: binary_sensor.kitchen_motion_sensor_1_occupancy
            domain: binary_sensor
          - type: is_motion
            condition: device
            device_id: 8f93f025843a9a3da3c079739843e408
            entity_id: binary_sensor.kitchen_motion_sensor_2_occupancy
            domain: binary_sensor
        sequence:
        - event: kitchen_occupied
          event_data: {}
      default:
      - service: light.turn_off
        data:
          transition: 20
        target:
          entity_id:
          - light.kitchen_lights
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.christmas_tree_lights
        enabled: false
  mode: restart
- id: '1662324895501'
  alias: Occupancy Kitchen (Rev 2)  (delay till no motion)
  description: Triggered in motion, restarted on fresh motion detection (sensors set
    to 90 second timeout). Waits will no motion is detected, then turns off lights.
  trigger:
  - type: motion
    platform: device
    device_id: ae2a09aff2b5e7ef8155aa0aea2ae997
    entity_id: binary_sensor.kitchen_motion_sensor_1_occupancy
    domain: binary_sensor
  - type: motion
    platform: device
    device_id: 8f93f025843a9a3da3c079739843e408
    entity_id: binary_sensor.kitchen_motion_sensor_2_occupancy
    domain: binary_sensor
  condition: []
  action:
  - choose:
    - conditions:
      - condition: time
        after: 01:00:00
        before: 07:00:00
      sequence:
      - service: light.turn_on
        data:
          transition: 1
          brightness_pct: 50
        target:
          entity_id:
          - light.kitchen
      - wait_template: '{{ (states("binary_sensor.kitchen_motion_sensor_1_occupancy")
          == ''off'') and (states("binary_sensor.kitchen_motion_sensor_1_occupancy")
          == ''off'') }}'
        continue_on_timeout: true
        timeout: 01:00:00
      - service: light.turn_off
        data:
          transition: 20
        target:
          entity_id:
          - light.kitchen
    default:
    - service: light.turn_on
      data:
        transition: 1
        brightness_pct: 100
      target:
        entity_id:
        - light.kitchen
    - wait_template: '{{ (states("binary_sensor.kitchen_motion_sensor_1_occupancy")
        == ''off'') and (states("binary_sensor.kitchen_motion_sensor_1_occupancy")
        == ''off'') }}'
      continue_on_timeout: true
      timeout: 01:00:00
    - service: light.turn_off
      data:
        transition: 20
      target:
        entity_id:
        - light.kitchen
  mode: restart
- id: '1665959554800'
  alias: Lucy Leave
  description: ''
  trigger:
  - entity_id: person.lucy
    for: 00:03:00
    from: home
    platform: state
    to: not_home
  condition: []
  action: []
  mode: single
- id: '1666971475237'
  alias: Low battery level detection & notification for all battery sensors [Blueprint]
  description: 'Updated 2022 10 28

    '
  use_blueprint:
    path: sbyx/low-battery-level-detection-notification-for-all-battery-sensors.yaml
    input:
      day: 1
      time: '11:00:00'
      actions:
      - service: notify.mobile_app_rich_mob_app
        data:
          title: Low Battery Warning
          message: 'Low battery warning for: {{sensors}}'
          data:
            channel: Home Maintenance
            icon_url: https://hass.richardhuish.com/local/icon/battery-alert-variant-outline-48.png
      threshold: 20
- id: '1667073362846'
  alias: Spider Drop Remote
  description: ''
  trigger:
  - platform: device
    domain: mqtt
    device_id: ca61296154562d84a7271001aba10aa5
    type: action
    subtype: open
    discovery_id: 0x000d6ffffe9c3ea8 action_open
    id: open
  - platform: device
    domain: mqtt
    device_id: ca61296154562d84a7271001aba10aa5
    type: action
    subtype: close
    discovery_id: 0x000d6ffffe9c3ea8 action_close
    id: close
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: open
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.spider_drop_switch
    - conditions:
      - condition: trigger
        id: close
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.spider_drop_switch
  mode: single
- id: '1667140350137'
  alias: Smoke Machine - Lights
  description: ' [Restarts]

    '
  trigger:
  - type: motion
    platform: device
    device_id: 853ca02c816df4ce4860c07060837a6a
    entity_id: binary_sensor.front_door_11_vmd4_camera1profile2
    domain: binary_sensor
    enabled: false
  - type: motion
    platform: device
    device_id: 83dd8340e23fb86fef21b09a22a57929
    entity_id: binary_sensor.drive_higher_21_vmd4_camera1profile2
    domain: binary_sensor
  - platform: state
    entity_id:
    - switch.smoke_machine
  condition: []
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.0x5c0272fffec8ba7e
  - delay:
      hours: 0
      minutes: 0
      seconds: 15
      milliseconds: 0
    enabled: true
  - service: switch.turn_off
    data: {}
    target:
      entity_id: switch.0x5c0272fffec8ba7e
  mode: restart
- id: '1667142302076'
  alias: Smoke Machine Automation - Reset Switch
  description: Remote is "Off" only, so this resets the switch back to "On"
  trigger:
  - platform: state
    entity_id:
    - switch.smoke_machine
    to: 'off'
  condition: []
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.smoke_machine
    enabled: false
  mode: single
- id: '1671628022949'
  alias: Christmas Lights Timer
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: +01:00:00
    id: 'ON'
  - platform: time
    at: '23:00:00'
    id: 'OFF'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 'ON'
      sequence:
      - service: light.turn_on
        data: {}
        target:
          entity_id: light.outside_christmas_lights
    - conditions:
      - condition: trigger
        id: 'OFF'
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.outside_christmas_lights
  mode: single
- id: '1674941369558'
  alias: Energenie eTRV Request Voltage Each Night
  description: ''
  trigger:
  - platform: time
    at: 04:00:00
  condition: []
  action:
  - device_id: 19cbf4886ed19963f11d43ffa42e28a1
    domain: button
    entity_id: button.3233_request_voltage
    type: press
  - device_id: d337951ff2c335a3d5f683e67dfd26d2
    domain: button
    entity_id: button.living_room_5251_request_voltage
    type: press
  - device_id: f957cc27f4c122e6f0eacb4d243c9a8e
    domain: button
    entity_id: button.hall_5475_request_voltage
    type: press
  - device_id: 24bba5d362e56debd480c0f59f029f97
    domain: button
    entity_id: button.3449_request_voltage
    type: press
  - device_id: 83dc978cfbddb0f9764b377570699bc6
    domain: button
    entity_id: button.bedroom_5318_request_voltage
    type: press
  - device_id: b098db44bd582bb4fea96e6ed978bf77
    domain: button
    entity_id: button.downstairs_bathroom_3463_request_voltage
    type: press
  - device_id: 80740b24e9eb107b19783c422f97f7aa
    domain: button
    entity_id: button.guest_bedroom_5993_request_voltage
    type: press
  - device_id: 0f000d8183ab1dd480377756d16f5dfb
    domain: button
    entity_id: button.2989_request_voltage
    type: press
  - device_id: 8cd90fd55efb7302c051643b01637133
    domain: button
    entity_id: button.bathroom_4329_request_voltage
    type: press
  - device_id: b37b09196c9ead29fe67c3ac8e958a1d
    domain: button
    entity_id: button.4168_request_voltage
    type: press
  - device_id: 0cff734b573bdb8230ebd1bab69fb477
    domain: button
    entity_id: button.4324_request_voltage
    type: press
  - device_id: 1bb46d37b4b76e1074e643fa8e705965
    domain: button
    entity_id: button.4335_request_voltage
    type: press
  - delay:
      hours: 1
      minutes: 0
      seconds: 0
      milliseconds: 0
  - device_id: 19cbf4886ed19963f11d43ffa42e28a1
    domain: button
    entity_id: button.3233_request_diagnostics
    type: press
  - device_id: d337951ff2c335a3d5f683e67dfd26d2
    domain: button
    entity_id: button.living_room_5251_request_diagnostics
    type: press
  - device_id: f957cc27f4c122e6f0eacb4d243c9a8e
    domain: button
    entity_id: button.hall_5475_request_diagnostics
    type: press
  - device_id: 24bba5d362e56debd480c0f59f029f97
    domain: button
    entity_id: button.3449_request_diagnostics
    type: press
  - device_id: 83dc978cfbddb0f9764b377570699bc6
    domain: button
    entity_id: button.bedroom_5318_request_diagnostics
    type: press
  - device_id: b098db44bd582bb4fea96e6ed978bf77
    domain: button
    entity_id: button.downstairs_bathroom_3463_request_diagnostics
    type: press
  - device_id: 80740b24e9eb107b19783c422f97f7aa
    domain: button
    entity_id: button.guest_bedroom_5993_request_diagnostics
    type: press
  - device_id: 0f000d8183ab1dd480377756d16f5dfb
    domain: button
    entity_id: button.2989_request_diagnostics
    type: press
  - device_id: 8cd90fd55efb7302c051643b01637133
    domain: button
    entity_id: button.bathroom_4329_request_diagnostics
    type: press
  - device_id: b37b09196c9ead29fe67c3ac8e958a1d
    domain: button
    entity_id: button.4168_request_diagnostics
    type: press
  - device_id: 0cff734b573bdb8230ebd1bab69fb477
    domain: button
    entity_id: button.4324_request_diagnostics
    type: press
  - device_id: 1bb46d37b4b76e1074e643fa8e705965
    domain: button
    entity_id: button.4335_request_diagnostics
    type: press
  mode: single
- id: '1674941449370'
  alias: Energenie eTRV Calibrate Once a Week
  description: ''
  trigger:
  - platform: time
    at: 04:30:00
  condition:
  - condition: time
    weekday:
    - sun
  action:
  - device_id: 19cbf4886ed19963f11d43ffa42e28a1
    domain: button
    entity_id: button.3233_calibrate
    type: press
  - device_id: d337951ff2c335a3d5f683e67dfd26d2
    domain: button
    entity_id: button.living_room_5251_calibrate
    type: press
  - device_id: f957cc27f4c122e6f0eacb4d243c9a8e
    domain: button
    entity_id: button.hall_5475_calibrate
    type: press
  - device_id: 24bba5d362e56debd480c0f59f029f97
    domain: button
    entity_id: button.3449_calibrate
    type: press
  - device_id: 83dc978cfbddb0f9764b377570699bc6
    domain: button
    entity_id: button.bedroom_5318_calibrate
    type: press
  - device_id: b098db44bd582bb4fea96e6ed978bf77
    domain: button
    entity_id: button.downstairs_bathroom_3463_calibrate
    type: press
  - device_id: 80740b24e9eb107b19783c422f97f7aa
    domain: button
    entity_id: button.guest_bedroom_5993_calibrate
    type: press
  - device_id: 0f000d8183ab1dd480377756d16f5dfb
    domain: button
    entity_id: button.2989_calibrate
    type: press
  - device_id: 8cd90fd55efb7302c051643b01637133
    domain: button
    entity_id: button.bathroom_4329_calibrate
    type: press
  - device_id: b37b09196c9ead29fe67c3ac8e958a1d
    domain: button
    entity_id: button.4168_calibrate
    type: press
  - device_id: 0cff734b573bdb8230ebd1bab69fb477
    domain: button
    entity_id: button.4324_calibrate
    type: press
  - device_id: 1bb46d37b4b76e1074e643fa8e705965
    domain: button
    entity_id: button.4335_calibrate
    type: press
  mode: single
- id: '1689364304362'
  alias: Irrigation Notify When Controllers Goes Offline
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.ic_back_status
    to:
    from: 'on'
    for:
      hours: 0
      minutes: 10
      seconds: 0
  - platform: state
    entity_id:
    - binary_sensor.ic_front_status
    to:
    from: 'on'
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition: []
  action:
  - service: notify.mobile_app_rich_mob_app
    data:
      message: Irrigation Controller Offline
      data:
        channel: Irrigation
        importance: default
        visibility: public
        notification_icon: mdi:water-alert-outline
    enabled: true
  mode: queued
